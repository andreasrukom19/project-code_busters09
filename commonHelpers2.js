import{s as n,c as i,f as r,a as A,h as P,u as E,i as y,p as T,d as F}from"./assets/icons-1a7ac7ca.js";import{P as M}from"./assets/vendor-99d50140.js";window.addEventListener("resize",_);function _(){const t=n.getOptions(),e=window.innerWidth;e>=768&&e<1440&&t.limit!==8?(t.limit=8,n.setOptions(t),i()):e>=1440&&t.limit!==9?(t.limit=9,n.setOptions(t),i()):e<768&&t.limit!==6&&(t.limit=6,n.setOptions(t),i())}const S=document.getElementById("tui-pagination-container"),C=new URL("/project-code_busters09/assets/icons-91d3aeb0.svg",self.location).href;S.addEventListener("click",I);const{page:x,perPage:w,results:X,totalPages:m}=n.getFromStorage("pagination")??{},l=new M(S,{totalItems:m*w,itemsPerPage:w,visiblePages:m>4?4:`${m}`,page:x,centerAlign:!0,template:{page:'<span class="tui-page-btn">{{page}}</span>',currentPage:'<strong class="tui-page-btn tui-is-selected">{{page}}</strong>',moveButton:`<span class="tui-page-btn tui-{{type}}"><svg class="tui-ico-{{type}}" width="8" height="8"><use href="${C}#icon-caret-small-{{type}}"></use></svg></span>`,disabledMoveButton:`<span class="tui-page-btn tui-is-disabled tui-{{type}}"><svg class="tui-ico-{{type}}" width="8" height="8"><use href="${C}#icon-caret-small-{{type}}"></use></svg></span>`,moreButton:'<span class="tui-page-btn tui-{{type}}-is-ellip"><span class="tui-ico-ellip">...</span></span>'}});l.on("afterMove",function(t){I()});function I(){const t=l.getCurrentPage();n.setApiOptions("page",`${t}`),i(),console.log(t)}const v=document.querySelector(".submit-form"),c=document.querySelector(".categories"),L=document.querySelector(".filter-box__list");document.addEventListener("DOMContentLoaded",function(){v.elements.search.value=""});v.addEventListener("submit",t=>{t.preventDefault();const e=t.target.elements.search.value,s=n.getFromStorage("options");s.page=1,s.keyword=e||null,localStorage.setItem("options",JSON.stringify(s)),i(),l.reset()});c.addEventListener("change",function(){const t=c.value,e=n.getFromStorage("options");e.page=1,e.category=t||null,localStorage.setItem("options",JSON.stringify(e)),c.value==="show-all"?(L.innerHTML="",n.defaultApiOptions(),v.elements.search.value="",i(),l.reset()):(r.category=t,L.innerHTML="",i(),l.reset())});r.getCategories().then(t=>{const e=document.createElement("option");e.value="",e.textContent="Categories",e.disabled=!0,e.selected=!0;const s=t.map(d=>{const u=d.replace(/_/g," "),p=document.createElement("option");return p.value=d,p.textContent=u,p}),o=D();s.push(o),c.appendChild(e),c.append(...s)});function D(){const t=document.createElement("option");return t.textContent="Show All",t.value="show-all",t}const h=document.getElementById("subscriptionForm");h.addEventListener("submit",q);function q(t){t.preventDefault();const e=document.getElementById("emailInput");if(e.checkValidity()){const s=e.value;r.subscribe(s).then(o=>{console.log("Subscription successful:",o),N(h)}).catch(o=>{console.error("Error subscribing:",o)})}else console.log("Invalid email format")}function N(t){Array.from(t.elements).forEach(e=>{e.tagName==="INPUT"||e.tagName==="TEXTAREA"?e.value="":e.tagName==="SELECT"&&(e.selectedIndex=0)})}h.addEventListener("submit",function(t){document.getElementById("emailInput").value===""&&(t.preventDefault(),alert("Будь ласка, заповніть обов'язкове поле email."))});const k=document.querySelector(".modal"),z=document.querySelector(".modal-content"),H=document.querySelector(".main-products");let a;H.addEventListener("click",R);async function R(t){if(t.target.classList.contains("main-cart-icon")||t.target.classList.contains("cart-img-products")||t.target.classList.contains("popular-cart-img")||t.target.classList.contains("js-checked-arrow")||t.target.classList.contains("popular-cart-img-down")||t.target.classList.contains("discount-icon-popular"))return;const e=t.target.closest("li");if(!e)return;A(),a=await r.findProductById(e.dataset.id),console.log(a);const s=n.getCart();z.innerHTML=J(a);const o=document.querySelector(".add-to-cart-btn");o.removeEventListener("click",b),o.addEventListener("click",b),s.some(u=>u._id===a._id)&&(o.firstChild.textContent="Remove from"),P(),V()}function b(){const t=n.getCart();console.log(t),t.some(s=>s._id===a._id)?j():U()}function O(){const t=document.querySelector(".add-to-cart-btn");t.firstChild.textContent==="Add to"?t.firstChild.textContent="Remove from":t.firstChild.textContent="Add to"}function U(){n.addProductToCart(a),E(),O()}function j(){n.removeFromCart(a._id),E(),O()}function J(t){let e=t.category.replace(/_/g," ");return`
  <button class="modal-btn-close">
  <svg class="close-sharp" width="16" height="16">
    <use href="${y}#icon-ion_close-sharp"></use>
  </svg>
</button>
<div class="modal-img-container">
  <img src="${t.img}" alt="${t.name}" class="modal-image" />
</div>
<div class="modal-info">
  <h2 class="modal-title">${t.name}</h2>
  <div class="modal-info-wrapper">
    <p class="modal-product">Category: <span>${e}</span></p>
    <p class="modal-product">Size: <span>${t.size}</span></p>
    <p class="modal-product">Popularity: <span>${t.popularity}</span></p>
  </div>
  <p class="modal-info-desc">${t.desc}</p>
</div>
<p class="modal-price">$${t.price}</p>
<button class="add-to-cart-btn">Add to<svg class="modal-cart" width="18" height="18">
    <use href="${y}#icon-heroicons-solid_shopping-cart"></use>
  </svg>
</button>
`}function B(t){t.key==="Escape"&&g()}function $(t){(t.target.classList.contains("modal")||t.target.closest(".modal-btn-close"))&&g()}function V(){k.style.display="block",document.body.classList.add("no-scroll"),document.addEventListener("keydown",B),window.addEventListener("click",$)}function g(){k.style.display="none",document.removeEventListener("keydown",B),window.removeEventListener("click",$),document.body.classList.remove("no-scroll"),i(),T(),F()}const f=document.querySelector(".isShownBtn");window.onscroll=()=>{window.scrollY>700?f.classList.remove("isHidden"):window.scrollY<700&&f.classList.add("isHidden")};f.onclick=()=>{window.scrollTo(0,0)};
//# sourceMappingURL=commonHelpers2.js.map
