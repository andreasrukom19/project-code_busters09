{"version":3,"file":"commonHelpers.js","sources":["../src/img/yellow_basket_desctop_1x-min.png","../src/img/yellow_basket_tablet_1x-min.png","../src/img/yellow_basket_mobile_1x-min.png","../src/img/yellow_basket_desctop_2x-min.png","../src/img/yellow_basket_tablet_2x-min.png","../src/img/yellow_basket_mobile_2x-min.png","../src/cart.js"],"sourcesContent":["export default \"__VITE_ASSET__22db5a51__\"","export default \"__VITE_ASSET__359a1065__\"","export default \"__VITE_ASSET__1afbb42c__\"","export default \"__VITE_ASSET__22b3ed6a__\"","export default \"__VITE_ASSET__77914d93__\"","export default \"__VITE_ASSET__b4656eb0__\"","import { foodService, storage } from './js/mainSection';\nimport { updateCartCountTitle } from './js/header';\n\nimport imgURLdesc from './img/yellow_basket_desctop_1x-min.png';\nimport imgURLtablet from './img/yellow_basket_tablet_1x-min.png';\nimport imgURLmob from './img/yellow_basket_mobile_1x-min.png';\nimport imgURLdesc2x from './img/yellow_basket_desctop_2x-min.png';\nimport imgURLtab2x from './img/yellow_basket_tablet_2x-min.png';\nimport imgURLmob2x from './img/yellow_basket_mobile_2x-min.png';\nimport iconsURL from './img/icons.svg';\n\nconst cartContent = document.getElementById('cart-content');\ncartContent.addEventListener('click', clearCart);\nconst cartProductsContainer = document.querySelector(\n  '.cart_products_container'\n);\nconst cartHeader = document.querySelector('.cart-quentity');\n\nlet products = storage.getFromStorage('cart');\n\nfunction clearCart(e) {\n  if (!e.target.closest('.cart-delete-all-button')) {\n    return;\n  }\n  storage.clearCart();\n  updateCartCountTitle();\n  cartHeader.textContent = 'Cart(0)';\n  cartContent.innerHTML = createCartMarkupDefault();\n}\nfunction totalQuantity() {\n  if (products) {\n    const totalCount = products.length;\n    cartHeader.textContent = `Cart (${totalCount})`;\n  }\n}\ntotalQuantity();\n\nfunction calculateTotalPrice() {\n  let total = 0;\n  if (products) {\n    products.forEach(product => {\n      total += product.price;\n    });\n  }\n  return total.toFixed(2);\n}\n\nfunction checkLocalStorage() {\n  if (products.length !== 0) {\n    cartContent.innerHTML = createCartMarkup();\n  } else {\n    cartContent.innerHTML = createCartMarkupDefault();\n  }\n}\n\ncheckLocalStorage();\nconst cartProductsList = cartContent.querySelector('.cart_products_list');\ncreateCartMarkupProducts(products);\n\nfunction createCartMarkup() {\n  const total = calculateTotalPrice();\n  return `<div class=\"products_container\">\n  <div class=\"cart-add-products\">      \n    <div class=\"delete-all\">        \n      <button type=\"submit\" class=\"cart-delete-all-button\">Delete all            \n        <svg class=\"cart_close_all\" width=\"24\" height=\"24\">\n          <use xlink:href=\"${iconsURL}#icon-ion_close-sharp\"></use>\n        </svg>            \n      </button>          \n    </div>        \n    <div class=\"cart_products_container\">       \n      <ul class=\"cart_products_list\">                        \n        <!-- Add your products here -->            \n      </ul>          \n    </div>      \n  </div>      \n  <div class=\"products_order_container\">      \n    <p class=\"your_order\">Your Order</p>        \n    <div class=\"total-count\">          \n      <div class=\"total-count-div\">            \n        <p class=\"cart-total\">Total</p>            \n        <div class=\"cart-total-sum\">              \n          <p class=\"cart-sum\">Sum:</p>              \n          <p class=\"cart-sum-number\">$${total}</p>\n        </div>\n      </div>\n    </div>\n\n    <form class=\"order-form\">\n      <div class=\"cart-input\">\n        <label class=\"label-cart\">\n          <span class=\"label-mark\">Mail:</span>\n          <input\n            type=\"email\"\n            class=\"cart-email\"\n            id=\"email\"\n            placeholder=\"enter your email\"\n            pattern=\"[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$\">\n        </label>\n      </div>\n      <div class=\"cart-btn\">\n        <button type=\"submit\" id=\"checkoutButton\" class=\"cart-checkout-button\">Checkout</button>\n      </div>\n    </form>\n    \n    <div id=\"modal-cart\" class=\"modal-cart-del\" style=\"display: none;\">\n    <div class=\"modal-overlay\">\n      <div class=\"cart-modal-content\">   \n      <button class=\"cart-delete-modal\">\n          <svg class=\"cart_close_all\" width=\"18\" height=\"18\">\n            <use xlink:href=\"${iconsURL}#icon-ion_close-sharp\"></use>\n          </svg>\n        </button>\n\n        <img class=\"cart-modal-img\" src=\"${imgURLdesc}\" alt=\"basket\" />\n        <div>\n        <p class=\"cart-success\">Order success</p>\n        <p class=\"cart-modal-info\">Thank you for shopping at Food Boutique. Your order has been received and is now being freshly prepared just for you! Get ready to indulge in nourishing goodness, delivered right to your doorstep. We're thrilled to be part of your journey to better health and happiness</p>\n      </div>\n      </div>\n  </div>\n  </div>`;\n}\n\nfunction createCartMarkupProducts() {\n  if (products) {\n    const markup = products\n      .map(({ _id, name, img, category, size, price }) => {\n        return `      \n    <li id=\"${_id}\" class=\"cart-list\">\n      <div class=\"obj-delete\">\n        <button class=\"cart-delete-button\">\n          <svg class=\"cart_close_all\" width=\"18\" height=\"18\">\n            <use xlink:href=\"${iconsURL}#icon-ion_close-sharp\"></use>\n          </svg>\n        </button>\n      </div>\n      <div class=\"cart-obj\">\n        <div class=\"add-img\">\n          <img src=\"${img}\" alt=\"Product Image\" class=\"product-image\" wi>\n        </div>\n        <div class=\"add-img-info\">\n          <p class=\"product-name\">${name}</p>\n          <div class=\"product-category-size\">\n            <p class=\"product-category\">Category: <span class=\"colored-text\">${category}</span></p>\n            <p class=\"product-size\">Size: <span class=\"colored-text\">${size}</span></p>\n          </div>\n          <p class=\"product-price\">$ ${price}</p>\n        </div>\n      </div>\n    </li>`;\n      })\n      .join('');\n    if (products.length === 0) return;\n    cartProductsList.innerHTML = markup;\n    const deleteBtns = document.querySelectorAll('.cart-delete-button');\n    deleteBtns.forEach(btn => btn.addEventListener('click', onDeleteProduct));\n  }\n}\n\nfunction onDeleteProduct(event) {\n  const productId = event.target.closest('li').id;\n  storage.removeFromCart(productId);\n  updateCartCountTitle();\n  products = storage.getFromStorage('cart');\n  if (products.length === 0) {\n    cartContent.innerHTML = createCartMarkupDefault();\n  }\n\n  const price = document.querySelector('.cart-sum-number');\n  if (price) {\n    price.textContent = calculateTotalPrice();\n  }\n\n  createCartMarkup();\n  createCartMarkupProducts();\n  totalQuantity();\n}\n\nfunction createCartMarkupDefault() {\n  return `  \n  <div class=\"box-img\">\n    <picture>\n      <source media=\"(min-width: 1440px)\" srcset=\"\n          ${imgURLdesc} 1x,\n          ${imgURLdesc2x} 2x\n        \" type=\"image/png\" />\n      <source media=\"(min-width: 768px)\" srcset=\"\n          ${imgURLtablet} 1x,\n          ${imgURLtab2x} 2x\n        \" type=\"image/png\" />\n      <source media=\"(min-width: 320px)\" srcset=\"\n          ${imgURLmob} 1x,\n          ${imgURLmob2x} 2x\n        \" type=\"image/png\" />\n      <img class=\"cart-img\" src=\"${imgURLdesc}\" alt=\"basket\" />\n    </picture>\n  </div>\n  <div class=\"cart-empty\">\n    <p class=\"cart-message\">\n      Your basket is <span class=\"hero-title-span\">empty...</span>\n    </p>\n    <p class=\"cart-message-ihfo\">\n      Go to the main page to select your favorite products and add them to\n      the cart.\n    </p>\n  </div>\n</div>`;\n}\n\nif (document.querySelector('.order-form')) {\n  const orderForm = document.querySelector('.order-form');\n  orderForm.addEventListener('submit', onCheckoutSubmit);\n\n  function onCheckoutSubmit(e) {\n    e.preventDefault();\n\n    const totalCart = storage\n      .getCart()\n      .map(elem => ({ productId: elem._id, amount: 1 }));\n    const emailInput = document.querySelector('.cart-email');\n    if (!emailInput.value) {\n      alert('pls enter email');\n      return;\n    }\n    foodService\n      .order(emailInput.value, totalCart)\n      .then(result => {\n        console.log(result.data);\n        storage.clearCart();\n        updateCartCountTitle();\n        cartHeader.textContent = 'Cart(0)';\n        cartContent.innerHTML = createCartMarkupDefault();\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  }\n}\n//modal window\nwindow.document.getElementById(\"checkoutButton\").addEventListener(\"click\", openCartModal);\nwindow.document.querySelector(\".cart-delete-modal\").addEventListener(\"click\", cartCloseModal);\nfunction openCartModal(event) {\nevent.preventDefault();\nconst inputEmail = document.getElementById(\"email-cart\");\nif (!inputEmail.checkValidity() || !inputEmail.value) {\nreturn;\n}\ncartModal();\n}\nfunction cartModal() {\ndocument.getElementById(\"modal-cart\").style.display = \"block\";\n}\nfunction cartCloseModal() {\ndocument.getElementById(\"modal-cart\").style.display = \"none\";\ncartContent.innerHTML = createCartMarkupDefault();\ntotalQuantity();\n\n}"],"names":["imgURLdesc","imgURLtablet","imgURLmob","imgURLdesc2x","imgURLtab2x","imgURLmob2x","cartContent","clearCart","cartHeader","products","storage","e","updateCartCountTitle","createCartMarkupDefault","totalQuantity","totalCount","calculateTotalPrice","total","product","checkLocalStorage","createCartMarkup","cartProductsList","createCartMarkupProducts","iconsURL","markup","_id","name","img","category","size","price","btn","onDeleteProduct","event","productId","onCheckoutSubmit","totalCart","elem","emailInput","foodService","result","err","openCartModal","cartCloseModal","inputEmail","cartModal"],"mappings":"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"}