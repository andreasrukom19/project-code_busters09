{"version":3,"file":"commonHelpers2.js","sources":["../src/js/food-api-service.js","../src/js/mainSection.js","../src/js/screenSizeChecker.js"],"sourcesContent":["import axios from 'axios';\n\nexport class FoodService {\n  constructor() {\n    this.URL = `https://food-boutique.b.goit.study/api`;\n    this.currentPage = 1;\n    this.perPage = 6;\n    this.searchQuerry = '';\n    this.category = '';\n  }\n\n  getFoodList() {\n    if (window.innerWidth >= 768 && window.innerWidth < 1440) {\n      this.perPage = 8;\n    } else if (window.innerWidth >= 1440) {\n      this.perPage = 9;\n    }\n    return axios\n      .get(\n        `${this.URL}/products?page=${this.currentPage}&limit=${this.perPage}&keyword=${this.searchQuerry}&category=${this.category}`\n      )\n      .then(response => {\n        return response.data;\n      });\n  }\n\n  findProductById(id) {\n    return axios.get(`${this.URL}/products/${id}`).then(response => {\n      return response.data;\n    });\n  }\n\n  getPopular() {\n    return axios.get(`${this.URL}/products/popular`).then(response => {\n      return response.data;\n    });\n  }\n\n  getDiscount() {\n    return axios.get(`${this.URL}/products/discount`).then(response => {\n      return response.data;\n    });\n  }\n\n  getCategories() {\n    return axios.get(`${this.URL}/products/categories`).then(response => {\n      return response.data;\n    });\n  }\n\n  resetPageCounter() {\n    this.currentPage = 1;\n  }\n\n  incrementPage() {\n    this.currentPage += 1;\n  }\n\n  //* POST => //\n\n  subscribe(email) {\n    axios.post(`${this.URL}/subscription`, {\n      email: email,\n    });\n  }\n\n  order(email, products) {\n    axios.post(`${this.URL}/orders`, {\n      email: email,\n      products,\n    });\n  }\n\n  /*\n!products = масив об'єктів\n!Приклад запиту order:\nfoodService.order('test123@gmail.com', [\n  { productId: '640c2dd963a319ea671e3860', amount: 2 },\n  { productId: '640c2dd963a319ea671e3861', amount: 1 },\n]);\n\n*/\n}\n","// import SimpleLightbox from 'simplelightbox';\n// import 'simplelightbox/dist/simple-lightbox.min.css';\nimport { LocalStorage } from './local-storages';\nimport { FoodService } from './food-api-service';\nconst filterBoxList = document.querySelector('.filter-box__list');\nconst popularProductsList = document.querySelector('.popular-products__list');\nconst discountProductsList = document.querySelector('.discount-products__list');\nconst popularProductsListResp = document.querySelector(\n  '.popular-products__list-responsive'\n);\nconst discountProductsListResp = document.querySelector(\n  '.discount-products__list-responsive'\n);\nexport const storage = new LocalStorage();\nexport const foodService = new FoodService();\n\ndocument.addEventListener('click', function (event) {\n  if (event.target.classList.contains('cart-img-products')) {\n    const currentImage = event.target;\n    const newImagePath = '../img/checked.svg';\n    currentImage.src = newImagePath;\n  }\n});\n\nmainContentDrawer();\npopularContentDrawer();\ndiscountContentDrawer();\n\nexport function mainContentDrawer() {\n  foodService\n    .getFoodList()\n    .then(data => {\n      filterBoxList.innerHTML = createProductsMarkup(data.results);\n    })\n    .catch(error => {\n      // TODO ADD NOTIFLIX\n      // Notify.failure(\n      //   \"Error\"\n      // );\n    });\n}\n\nexport function popularContentDrawer() {\n  foodService\n    .getPopular()\n    .then(data => {\n      popularProductsList.innerHTML = createPopularMarkup(data);\n      popularProductsListResp.innerHTML = createPopularMarkup(data);\n    })\n    .catch(error => {\n      // TODO ADD NOTIFLIX\n      // Notify.failure(\n      //   \"Error\"\n      // );\n    });\n}\n\nexport function discountContentDrawer() {\n  foodService\n    .getDiscount()\n    .then(data => {\n      discountProductsList.innerHTML = createDiscountMarkup(data);\n      discountProductsListResp.innerHTML = createDiscountMarkup(data);\n    })\n    .catch(error => {\n      // TODO ADD NOTIFLIX\n      // Notify.failure(\n      //   \"Error\"\n      // );\n    });\n}\n\nfunction createProductsMarkup(arr) {\n  return arr\n    .map(\n      ({\n        _id,\n        name,\n        img,\n        category,\n        price,\n        popularity,\n        size,\n        is10PercentOff,\n      }) => `<li class=\"product-card data-id=\"${_id}\">\n       ${\n         is10PercentOff\n           ? '<img class=\"discount-icon-products\" src=\"../../assets/discount.svg\" alt=\"Discount\" />'\n           : ''\n       }\n      <div class=\"img-container\"><a href=\"${img}\"><img class=\"product-card__img\" src=\"${img}\" alt=\"${name}\" loading=\"lazy\" /></a>\n      </div>\n      <div class=\"info\">      \n        <h2 class=\"info__title\">${name}</h2>\n        <div class=\"info-wrapper\">\n        <p class=\"info-wrapper__product\">Category:<span>${category}</span></p>\n        <p class=\"info-wrapper__product\">Size:<span>${size}</span></p>\n        <p class=\"info-wrapper__product\">Popularity:<span>${popularity}</span></p>\n        </div>\n        <div class=\"info-wrapper__price-container\" >\n        <p class=\"info__price\">$${price}</p>       \n          <img class=\"cart-img-products\" src=\"${\n            import.meta.env.BASE_URL\n          }img/cart.svg\" alt=\"cart\" />\n        </div>     \n      </div>\n    </li>`\n    )\n    .join('');\n}\n\nfunction createPopularMarkup(arr) {\n  return arr\n    .map(\n      ({\n        _id,\n        name,\n        img,\n        category,\n        popularity,\n        size,\n        is10PercentOff,\n      }) => `      \n      <li class=\"popular-item\" data-id=\"${_id}\">\n      ${\n        is10PercentOff\n          ? '<img class=\"discount-icon-popular\" src=\"./img/discount.svg\" alt=\"Discount\" />  <img class=\"popular-cart-img-down\" src=\"./img/cartLight.svg\" alt=\"cart\" />'\n          : '<img class=\"popular-cart-img\" src=\"./img/cartLight.svg\" alt=\"cart\" />'\n      }\n       \n      <div class=\"popular-img-container\"><a href=\"${img}\"><img class=\"popular-item__img\" src=\"${img}\" alt=\"${name}\" loading=\"lazy\" /></a>\n      </div>\n      <div class=\"popular-info\">\n        <h3 class=\"popular-info__title\">${name}</h3>\n        <div class=\"info-wrapper\">\n        <p class=\"info-wrapper__product\">Category:<span>${category}</span></p>\n        <p class=\"info-wrapper__product\">Size:<span>${size}</span></p>\n        <p class=\"info-wrapper__product\">Popularity:<span>${popularity}</span></p>\n        </div>             \n      </div>\n    </li>`\n    )\n    .slice(0, 5)\n    .join('');\n}\n\nfunction createDiscountMarkup(arr) {\n  // arr.slice(0, 5);\n  return arr\n    .map(\n      ({ _id, name, img, price }) => `      \n      <li class=\"discount-item\" data-id=\"${_id}\">\n       <img class=\"discount-cheap\" src=\"./img/discount.svg\" alt=\"cart\" />  \n      <div class=\"discount-img-container\"><a href=\"${img}\"><img class=\"discount-item__img\" src=\"${img}\" alt=\"${name}\" loading=\"lazy\" /></a>\n      </div>\n      <div class=\"discount-info\">\n        <h3 class=\"discount-info__title\">${name}</h3>\n        <div class=\"discount-img-wrapper\">\n        <p class=\"discount-info__price\">$${price}</p>\n         <img class=\"cart-img-products\" src=\"./img/cart.svg\" alt=\"cart\" />      \n        </div>        \n      </div>\n    </li>`\n    )\n    .slice(0, 2)\n    .join('');\n}\n","// import './mainSection.js';\nimport { mainContentDrawer, foodService } from './mainSection.js';\n\nwindow.addEventListener('resize', onScreenSizeFetch);\n\nfunction onScreenSizeFetch() {\n  const screenSize = window.innerWidth;\n  if (screenSize >= 768 && screenSize < 1440 && foodService.perPage !== 8) {\n    foodService.perPage = 8;\n    mainContentDrawer();\n  } else if (screenSize >= 1440 && foodService.perPage !== 9) {\n    foodService.perPage = 9;\n    mainContentDrawer();\n  } else if (screenSize < 768 && foodService.perPage !== 6) {\n    foodService.perPage = 6;\n    mainContentDrawer();\n  }\n}\n"],"names":["FoodService","axios","response","id","email","products","filterBoxList","popularProductsList","discountProductsList","popularProductsListResp","discountProductsListResp","foodService","event","currentImage","newImagePath","mainContentDrawer","popularContentDrawer","discountContentDrawer","data","createProductsMarkup","error","createPopularMarkup","createDiscountMarkup","arr","_id","name","img","category","price","popularity","size","is10PercentOff","onScreenSizeFetch","screenSize"],"mappings":"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"}