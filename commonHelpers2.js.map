{"version":3,"file":"commonHelpers2.js","sources":["../src/js/food-api-service.js","../src/js/mainSection.js","../src/js/local-storages.js"],"sourcesContent":["import axios from 'axios';\n\nexport class FoodService {\n  constructor() {\n    this.URL = `https://food-boutique.b.goit.study/api`;\n    this.currentPage = 1;\n    this.perPage = 9;\n    this.searchQuerry = '';\n    this.category = '';\n  }\n\n  getFoodList() {\n    return axios\n      .get(\n        `${this.URL}/products?page=${this.currentPage}&limit=${this.perPage}&keyword=${this.searchQuerry}&category=${this.category}`\n      )\n      .then(response => {\n        return response.data;\n      });\n  }\n\n  findProductById(id) {\n    return axios.get(`${this.URL}/products/${id}`).then(response => {\n      return response.data;\n    });\n  }\n\n  getPopular() {\n    return axios\n      .get(`${this.URL}/products/popular?limit=${this.perPage}`)\n      .then(response => {\n        return response.data;\n      });\n  }\n\n  getDiscount() {\n    return axios.get(`${this.URL}/products/discount`).then(response => {\n      return response.data;\n    });\n  }\n\n  getCategories() {\n    return axios.get(`${this.URL}/products/categories`).then(response => {\n      return response.data;\n    });\n  }\n\n  resetPageCounter() {\n    this.currentPage = 1;\n  }\n\n  incrementPage() {\n    this.currentPage += 1;\n  }\n\n  //* POST => //\n\n  subscribe(email) {\n    axios.post(`${this.URL}/subscription`, {\n      email: email,\n    });\n  }\n\n  order(email, products) {\n    axios.post(`${this.URL}/orders`, {\n      email: email,\n      products,\n    });\n  }\n\n  /*\n!products = масив об'єктів\n!Приклад запиту order:\nfoodService.order('test123@gmail.com', [\n  { productId: '640c2dd963a319ea671e3860', amount: 2 },\n  { productId: '640c2dd963a319ea671e3861', amount: 1 },\n]);\n\n*/\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { FoodService } from './food-api-service';\nconst filterBoxList = document.querySelector('.filter-box__list');\nconst popularProductsList = document.querySelector('.popular-products__list');\nconst discountProductsList = document.querySelector('.discount-products__list');\nconst popularProductsListResp = document.querySelector(\n  '.popular-products__list-responsive'\n);\nconst discountProductsListResp = document.querySelector(\n  '.discount-products__list-responsive'\n);\n\nconst foodService = new FoodService();\n\nfoodService\n  .getFoodList()\n  .then(data => {\n    filterBoxList.innerHTML = createProductsMarkup(data.results);\n  })\n  .catch(error => {\n    // TODO ADD NOTIFLIX\n    // Notify.failure(\n    //   \"Error\"\n    // );\n  });\n\nfoodService\n  .getPopular()\n  .then(data => {\n    popularProductsList.innerHTML = createPopularMarkup(data);\n    popularProductsListResp.innerHTML = createPopularMarkup(data);\n  })\n  .catch(error => {\n    // TODO ADD NOTIFLIX\n    // Notify.failure(\n    //   \"Error\"\n    // );\n  });\n\nfoodService\n  .getDiscount()\n  .then(data => {\n    discountProductsList.innerHTML = createDiscountMarkup(data);\n    discountProductsListResp.innerHTML = createDiscountMarkup(data);\n  })\n  .catch(error => {\n    // TODO ADD NOTIFLIX\n    // Notify.failure(\n    //   \"Error\"\n    // );\n  });\n\nfunction createProductsMarkup(arr) {\n  return arr\n    .map(\n      ({\n        name,\n        img,\n        category,\n        price,\n        popularity,\n        size,\n      }) => `<li class=\"product-card\">\n      <div class=\"img-container\"><a href=\"${img}\"><img class=\"product-card__img\" src=\"${img}\" alt=\"${name}\" loading=\"lazy\" /></a>\n      </div>\n      <div class=\"info\">\n        <h2 class=\"info__title\">${name}</h2>\n        <div class=\"info-wrapper\">\n        <p class=\"info-wrapper__product\">Category:<span>${category}</span></p>\n        <p class=\"info-wrapper__product\">Size:<span>${size}</span></p>\n        <p class=\"info-wrapper__product\">Popularity:<span>${popularity}</span></p>\n        </div>\n        <div class=\"info-wrapper__price-container\" >\n        <p class=\"info__price\">$${price}</p>\n        <img class=\"cart-img-products\" src=\"../img/cart.svg\" alt=\"cart\" />\n        </div>     \n      </div>\n    </li>`\n    )\n    .join('');\n}\n\nfunction createPopularMarkup(arr) {\n  return arr\n    .map(\n      ({ name, img, category, popularity, size }) => `      \n      <li class=\"popular-item\">\n       <img class=\"popular-cart-img\" src=\"../img/cartLight.svg\" alt=\"cart\" />  \n      <div class=\"popular-img-container\"><a href=\"${img}\"><img class=\"popular-item__img\" src=\"${img}\" alt=\"${name}\" loading=\"lazy\" /></a>\n      </div>\n      <div class=\"popular-info\">\n        <h3 class=\"popular-info__title\">${name}</h3>\n        <div class=\"info-wrapper\">\n        <p class=\"info-wrapper__product\">Category:<span>${category}</span></p>\n        <p class=\"info-wrapper__product\">Size:<span>${size}</span></p>\n        <p class=\"info-wrapper__product\">Popularity:<span>${popularity}</span></p>\n        </div>             \n      </div>\n    </li>`\n    )\n    .slice(0, 5)\n    .join('');\n}\n\nfunction createDiscountMarkup(arr) {\n  // arr.slice(0, 5);\n  return arr\n    .map(\n      ({ name, img, price }) => `      \n      <li class=\"discount-item\">\n       <img class=\"discount-cheap\" src=\"../img/discount.svg\" alt=\"cart\" />  \n      <div class=\"discount-img-container\"><a href=\"${img}\"><img class=\"discount-item__img\" src=\"${img}\" alt=\"${name}\" loading=\"lazy\" /></a>\n      </div>\n      <div class=\"discount-info\">\n        <h3 class=\"discount-info__title\">${name}</h3>\n        <div class=\"discount-img-wrapper\">\n        <p class=\"discount-info__price\">$${price}</p>\n         <img class=\"cart-img-products\" src=\"../img/cart.svg\" alt=\"cart\" />      \n        </div>        \n      </div>\n    </li>`\n    )\n    .slice(0, 2)\n    .join('');\n}\n\nexport { createProductsMarkup, createPopularMarkup, createDiscountMarkup };\n","import axios from \"axios\";\nimport { FoodService } from \"./food-api-service\";\n\naxios.defaults.baseURL = 'https://food-boutique.b.goit.study/api';\n\nconst foodService = new FoodService();\n\nexport class LocalStorage {\n\n    constructor() {\n        \n    }\n\n    saveAllToLocalStorage() {\n        if (!localStorage.getItem('products')) {\n            return foodService.getFoodList()\n                .then(resp => {\n                    localStorage.setItem('products', JSON.stringify(resp.results))\n                })\n        }\n    }\n\n    addToCart(id) {\n        // test \n        const products = JSON.parse(localStorage.getItem('products'));\n        // test\n\n        if (!localStorage.getItem('cart')) { \n            \n            localStorage.setItem('cart')\n        }\n        const item = products.find(item => item._id === id);\n        const cart = JSON.parse(localStorage.getItem('cart')).push(item);\n        localStorage.setItem('cart', JSON.stringify(`${cart}`))\n    }\n    \n    \n    getFromStorage(item) {\n        return JSON.parse(localStorage.getItem(`${item}`));\n    }\n\n    removeFromCart() { \n\n    }\n\n    clearCart() { \n\n    }\n}\n\nconst storage = new LocalStorage;\nstorage.addToCart('640c2dd963a319ea671e383b');\nstorage.addToCart('640c2dd963a319ea671e3660');\n\n\n"],"names":["FoodService","axios","response","id","email","products","filterBoxList","popularProductsList","discountProductsList","popularProductsListResp","discountProductsListResp","foodService","data","createProductsMarkup","error","createPopularMarkup","createDiscountMarkup","arr","name","img","category","price","popularity","size","LocalStorage","resp","item","cart","storage"],"mappings":"qxBAEO,MAAMA,CAAY,CACvB,aAAc,CACZ,KAAK,IAAM,yCACX,KAAK,YAAc,EACnB,KAAK,QAAU,EACf,KAAK,aAAe,GACpB,KAAK,SAAW,EACjB,CAED,aAAc,CACZ,OAAOC,EACJ,IACC,GAAG,KAAK,qBAAqB,KAAK,qBAAqB,KAAK,mBAAmB,KAAK,yBAAyB,KAAK,UACnH,EACA,KAAKC,GACGA,EAAS,IACjB,CACJ,CAED,gBAAgBC,EAAI,CAClB,OAAOF,EAAM,IAAI,GAAG,KAAK,gBAAgBE,GAAI,EAAE,KAAKD,GAC3CA,EAAS,IACjB,CACF,CAED,YAAa,CACX,OAAOD,EACJ,IAAI,GAAG,KAAK,8BAA8B,KAAK,SAAS,EACxD,KAAKC,GACGA,EAAS,IACjB,CACJ,CAED,aAAc,CACZ,OAAOD,EAAM,IAAI,GAAG,KAAK,uBAAuB,EAAE,KAAKC,GAC9CA,EAAS,IACjB,CACF,CAED,eAAgB,CACd,OAAOD,EAAM,IAAI,GAAG,KAAK,yBAAyB,EAAE,KAAKC,GAChDA,EAAS,IACjB,CACF,CAED,kBAAmB,CACjB,KAAK,YAAc,CACpB,CAED,eAAgB,CACd,KAAK,aAAe,CACrB,CAID,UAAUE,EAAO,CACfH,EAAM,KAAK,GAAG,KAAK,mBAAoB,CACrC,MAAOG,CACb,CAAK,CACF,CAED,MAAMA,EAAOC,EAAU,CACrBJ,EAAM,KAAK,GAAG,KAAK,aAAc,CAC/B,MAAOG,EACP,SAAAC,CACN,CAAK,CACF,CAWH,CC3EA,MAAMC,EAAgB,SAAS,cAAc,mBAAmB,EAC1DC,EAAsB,SAAS,cAAc,yBAAyB,EACtEC,EAAuB,SAAS,cAAc,0BAA0B,EACxEC,EAA0B,SAAS,cACvC,oCACF,EACMC,EAA2B,SAAS,cACxC,qCACF,EAEMC,EAAc,IAAIX,EAExBW,EACG,YAAa,EACb,KAAKC,GAAQ,CACZN,EAAc,UAAYO,EAAqBD,EAAK,OAAO,CAC/D,CAAG,EACA,MAAME,GAAS,CAKlB,CAAG,EAEHH,EACG,WAAY,EACZ,KAAKC,GAAQ,CACZL,EAAoB,UAAYQ,EAAoBH,CAAI,EACxDH,EAAwB,UAAYM,EAAoBH,CAAI,CAChE,CAAG,EACA,MAAME,GAAS,CAKlB,CAAG,EAEHH,EACG,YAAa,EACb,KAAKC,GAAQ,CACZJ,EAAqB,UAAYQ,EAAqBJ,CAAI,EAC1DF,EAAyB,UAAYM,EAAqBJ,CAAI,CAClE,CAAG,EACA,MAAME,GAAS,CAKlB,CAAG,EAEH,SAASD,EAAqBI,EAAK,CACjC,OAAOA,EACJ,IACC,CAAC,CACC,KAAAC,EACA,IAAAC,EACA,SAAAC,EACA,MAAAC,EACA,WAAAC,EACA,KAAAC,CACR,IAAY;AAAA,4CACgCJ,0CAA4CA,WAAaD;AAAA;AAAA;AAAA,kCAGnEA;AAAA;AAAA,0DAEwBE;AAAA,sDACJG;AAAA,4DACMD;AAAA;AAAA;AAAA,kCAG1BD;AAAA;AAAA;AAAA;AAAA,UAK7B,EACA,KAAK,EAAE,CACZ,CAEA,SAASN,EAAoBE,EAAK,CAChC,OAAOA,EACJ,IACC,CAAC,CAAE,KAAAC,EAAM,IAAAC,EAAK,SAAAC,EAAU,WAAAE,EAAY,KAAAC,CAAI,IAAO;AAAA;AAAA;AAAA,oDAGDJ,0CAA4CA,WAAaD;AAAA;AAAA;AAAA,0CAGnEA;AAAA;AAAA,0DAEgBE;AAAA,sDACJG;AAAA,4DACMD;AAAA;AAAA;AAAA,UAIvD,EACA,MAAM,EAAG,CAAC,EACV,KAAK,EAAE,CACZ,CAEA,SAASN,EAAqBC,EAAK,CAEjC,OAAOA,EACJ,IACC,CAAC,CAAE,KAAAC,EAAM,IAAAC,EAAK,MAAAE,CAAO,IAAK;AAAA;AAAA;AAAA,qDAGqBF,2CAA6CA,WAAaD;AAAA;AAAA;AAAA,2CAGpEA;AAAA;AAAA,2CAEAG;AAAA;AAAA;AAAA;AAAA,UAKtC,EACA,MAAM,EAAG,CAAC,EACV,KAAK,EAAE,CACZ,CC3HApB,EAAM,SAAS,QAAU,yCAEzB,MAAMU,EAAc,IAAIX,EAEjB,MAAMwB,CAAa,CAEtB,aAAc,CAEb,CAED,uBAAwB,CACpB,GAAI,CAAC,aAAa,QAAQ,UAAU,EAChC,OAAOb,EAAY,YAAa,EAC3B,KAAKc,GAAQ,CACV,aAAa,QAAQ,WAAY,KAAK,UAAUA,EAAK,OAAO,CAAC,CACjF,CAAiB,CAEZ,CAED,UAAUtB,EAAI,CAEV,MAAME,EAAW,KAAK,MAAM,aAAa,QAAQ,UAAU,CAAC,EAGvD,aAAa,QAAQ,MAAM,GAE5B,aAAa,QAAQ,MAAM,EAE/B,MAAMqB,EAAOrB,EAAS,KAAKqB,GAAQA,EAAK,MAAQvB,CAAE,EAC5CwB,EAAO,KAAK,MAAM,aAAa,QAAQ,MAAM,CAAC,EAAE,KAAKD,CAAI,EAC/D,aAAa,QAAQ,OAAQ,KAAK,UAAU,GAAGC,GAAM,CAAC,CACzD,CAGD,eAAeD,EAAM,CACjB,OAAO,KAAK,MAAM,aAAa,QAAQ,GAAGA,GAAM,CAAC,CACpD,CAED,gBAAiB,CAEhB,CAED,WAAY,CAEX,CACL,CAEA,MAAME,EAAU,IAAIJ,EACpBI,EAAQ,UAAU,0BAA0B,EAC5CA,EAAQ,UAAU,0BAA0B"}