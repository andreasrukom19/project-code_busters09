{"version":3,"file":"commonHelpers2.js","sources":["../src/js/screenSizeChecker.js","../src/js/pagination-tui.js","../src/js/filters.js","../src/js/modal.js","../src/js/scrollUp.js"],"sourcesContent":["// import './mainSection.js';\nimport { contentByOptionsDrawer } from './mainSection.js';\n\nimport { storage } from './mainSection.js';\n\nwindow.addEventListener('resize', onScreenSizeFetch2);\n\nfunction onScreenSizeFetch2() {\n  const options = storage.getOptions();\n\n  const screenSize = window.innerWidth;\n  if (screenSize >= 768 && screenSize < 1440 && options.limit !== 8) {\n    options.limit = 8;\n    storage.setOptions(options);\n    contentByOptionsDrawer(options);\n  } else if (screenSize >= 1440 && options.limit !== 9) {\n    options.limit = 9;\n    storage.setOptions(options);\n    contentByOptionsDrawer(options);\n  } else if (screenSize < 768 && options.limit !== 6) {\n    options.limit = 6;\n    storage.setOptions(options);\n    contentByOptionsDrawer(options);\n  }\n}\n","import Pagination from 'tui-pagination';\nimport { storage } from './mainSection';\nimport { contentByOptionsDrawer } from './mainSection';\nconst container = document.getElementById('tui-pagination-container');\nconst iconAddress = new URL('/img/icons.svg', import.meta.url).href;\n\ncontainer.addEventListener('click', launchPaginstion);\n\nconst { page, perPage, results, totalPages } =\n  storage.getFromStorage('pagination') ?? {};\n\nexport const pagination = new Pagination(container, {\n  totalItems: totalPages * perPage,\n  itemsPerPage: perPage,\n  visiblePages: totalPages > 4 ? 4 : `${totalPages}`,\n  page,\n  centerAlign: true,\n  template: {\n    page: '<span class=\"tui-page-btn\">{{page}}</span>',\n    currentPage:\n      '<strong class=\"tui-page-btn tui-is-selected\">{{page}}</strong>',\n    moveButton:\n      '<span class=\"tui-page-btn tui-{{type}}\">' +\n      '<svg class=\"tui-ico-{{type}}\" width=\"8\" height=\"8\">' +\n      `<use href=\"${iconAddress}#icon-caret-small-{{type}}\"></use>` +\n      '</svg>' +\n      '</span>',\n    disabledMoveButton:\n      '<span class=\"tui-page-btn tui-is-disabled tui-{{type}}\">' +\n      '<svg class=\"tui-ico-{{type}}\" width=\"8\" height=\"8\">' +\n      `<use href=\"${iconAddress}#icon-caret-small-{{type}}\"></use>` +\n      '</svg>' +\n      '</span>',\n    moreButton:\n      '<span class=\"tui-page-btn tui-{{type}}-is-ellip\">' +\n      '<span class=\"tui-ico-ellip\">...</span>' +\n      '</span>',\n  },\n});\n\npagination.on('afterMove', function (eventData) {\n  // Зміна сторінки у локальному сховищі після переміщення на нову сторінку\n  launchPaginstion();\n});\n\nexport function launchPaginstion() {\n  const p = pagination.getCurrentPage();\n  storage.setApiOptions('page', `${p}`);\n  contentByOptionsDrawer();\n}\n","import { foodService, contentByOptionsDrawer, storage } from './mainSection.js';\nimport { pagination } from './pagination-tui.js';\n\nconst submitForm = document.querySelector('.submit-form');\nconst select = document.querySelector('.categories');\nconst filterBoxList = document.querySelector('.filter-box__list');\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  submitForm.elements.search.value = '';\n});\n\nsubmitForm.addEventListener('submit', event => {\n  event.preventDefault();\n\n  const searchValue = event.target.elements.search.value;\n  const savedOptions = storage.getFromStorage('options');\n  savedOptions.page = 1;\n\n  savedOptions.keyword = searchValue ? searchValue : null;\n\n  localStorage.setItem('options', JSON.stringify(savedOptions));\n  contentByOptionsDrawer();\n  pagination.reset();\n});\n\nselect.addEventListener('change', function () {\n  const selectedItem = select.value;\n\n  const savedOptions = storage.getFromStorage('options');\n  savedOptions.page = 1;\n\n  savedOptions.category = selectedItem ? selectedItem : null;\n  localStorage.setItem('options', JSON.stringify(savedOptions));\n  if (select.value === 'show-all') {\n    filterBoxList.innerHTML = '';\n    storage.defaultApiOptions();\n    submitForm.elements.search.value = '';\n    contentByOptionsDrawer();\n    pagination.reset();\n  } else {\n    foodService.category = selectedItem;\n    filterBoxList.innerHTML = '';\n    contentByOptionsDrawer();\n    pagination.reset();\n  }\n});\n\nfoodService.getCategories().then(categories => {\n  const defaultOption = document.createElement('option');\n  defaultOption.value = '';\n  defaultOption.textContent = 'Categories';\n  defaultOption.disabled = true;\n  defaultOption.selected = true; // Обрана за замовчуванням\n\n  const options = categories.map(category => {\n    // Заміна нижніх підкреслень на пробіли\n    const displayText = category.replace(/_/g, ' ');\n\n    const option = document.createElement('option');\n    option.value = category;\n    option.textContent = displayText;\n    return option;\n  });\n  const showAllOption = createShowAllOption();\n  options.push(showAllOption);\n  select.appendChild(defaultOption);\n  select.append(...options);\n});\n\nfunction createShowAllOption() {\n  const showAllOption = document.createElement('option');\n  showAllOption.textContent = 'Show All';\n  showAllOption.value = 'show-all';\n  return showAllOption;\n}\n","import {\n  contentByOptionsDrawer,\n  foodService,\n  popularContentDrawer,\n  discountContentDrawer,\n} from './mainSection';\nimport { storage } from './mainSection';\nimport iconUrl from '../img/icons.svg';\nimport { updateCartCountTitle } from './header';\nimport { hideSpinner, showSpinner } from './spinner';\n\nconst modal = document.querySelector('.modal');\nconst modalContent = document.querySelector('.modal-content');\nconst listItems = document.querySelector('.main-products');\n\nlet productData;\n// let category;\nlistItems.addEventListener('click', onCardClick);\n\nasync function onCardClick(e) {\n  if (\n    e.target.classList.contains('main-cart-icon') ||\n    e.target.classList.contains('cart-img-products') ||\n    e.target.classList.contains('popular-cart-img') ||\n    e.target.classList.contains('js-checked-arrow') ||\n    e.target.classList.contains('popular-cart-img-down') ||\n    e.target.classList.contains('discount-icon-popular')\n  ) {\n    return;\n  }\n\n  const card = e.target.closest('li');\n  if (!card) return;\n  showSpinner();\n  productData = await foodService.findProductById(card.dataset.id);\n  const cartList = storage.getCart();\n\n  modalContent.innerHTML = makeModalMarkup(productData);\n\n  const addToCartBtn = document.querySelector('.add-to-cart-btn');\n  addToCartBtn.removeEventListener('click', onCartBtnClick);\n  addToCartBtn.addEventListener('click', onCartBtnClick);\n  const isInCartList = cartList.some(\n    cartElem => cartElem._id === productData._id\n  );\n  if (isInCartList) {\n    addToCartBtn.firstChild.textContent = 'Remove from';\n  }\n  hideSpinner();\n  openModal();\n}\n\nfunction onCartBtnClick() {\n  const cartList = storage.getCart();\n  const isInCartList = cartList.some(\n    cartElem => cartElem._id === productData._id\n  );\n\n  if (isInCartList) {\n    removeFromCart();\n  } else {\n    addToCart();\n  }\n}\n\nfunction BtnNameSwitcher() {\n  const btn = document.querySelector('.add-to-cart-btn');\n  if (btn.firstChild.textContent === 'Add to') {\n    btn.firstChild.textContent = 'Remove from';\n  } else {\n    btn.firstChild.textContent = 'Add to';\n  }\n}\n\nfunction addToCart() {\n  storage.addProductToCart(productData);\n  updateCartCountTitle();\n  BtnNameSwitcher();\n}\n\nfunction removeFromCart() {\n  storage.removeFromCart(productData._id);\n  updateCartCountTitle();\n  BtnNameSwitcher();\n}\n\nfunction makeModalMarkup(product) {\n  let updateCategory = product.category.replace(/_/g, ' ');\n  return `\n  <button class=\"modal-btn-close\">\n  <svg class=\"close-sharp\" width=\"16\" height=\"16\">\n    <use href=\"${iconUrl}#icon-ion_close-sharp\"></use>\n  </svg>\n</button>\n<div class=\"modal-img-container\">\n  <img src=\"${product.img}\" alt=\"${product.name}\" class=\"modal-image\" />\n</div>\n<div class=\"modal-info\">\n  <h2 class=\"modal-title\">${product.name}</h2>\n  <div class=\"modal-info-wrapper\">\n    <p class=\"modal-product\">Category: <span>${updateCategory}</span></p>\n    <p class=\"modal-product\">Size: <span>${product.size}</span></p>\n    <p class=\"modal-product\">Popularity: <span>${product.popularity}</span></p>\n  </div>\n  <p class=\"modal-info-desc\">${product.desc}</p>\n</div>\n<p class=\"modal-price\">$${product.price}</p>\n<button class=\"add-to-cart-btn\">Add to<svg class=\"modal-cart\" width=\"18\" height=\"18\">\n    <use href=\"${iconUrl}#icon-heroicons-solid_shopping-cart\"></use>\n  </svg>\n</button>\n`;\n}\n\nfunction onEscCloseModal(e) {\n  if (e.key === 'Escape') {\n    closeModal();\n  }\n}\n\nfunction onClickCloseModal(e) {\n  if (e.target.classList.contains('modal')) {\n    // закриття по кліку по бекдропу\n    closeModal();\n  } else if (e.target.closest('.modal-btn-close')) {\n    // закриття по кліку по кнопці з класом '.modal-btn-close'\n    closeModal();\n  }\n}\n\nfunction openModal() {\n  modal.style.display = 'block';\n  document.body.classList.add('no-scroll');\n  document.addEventListener('keydown', onEscCloseModal);\n  window.addEventListener('click', onClickCloseModal);\n}\n\nfunction closeModal() {\n  modal.style.display = 'none';\n  document.removeEventListener('keydown', onEscCloseModal);\n  window.removeEventListener('click', onClickCloseModal);\n  document.body.classList.remove('no-scroll');\n  contentByOptionsDrawer();\n  popularContentDrawer();\n  discountContentDrawer();\n}\n","\n\nconst scrolltoTopBtn = document.querySelector ('.isShownBtn')\nwindow.onscroll = () => {\n    if (window.scrollY > 700) {\n        scrolltoTopBtn.classList.remove('isHidden')\n    } else if (window.scrollY < 700) {\n        scrolltoTopBtn.classList.add('isHidden')\n    }\n};\n\nscrolltoTopBtn.onclick = () => {\n    window.scrollTo(0, 0);\n\n};"],"names":["onScreenSizeFetch2","options","storage","screenSize","contentByOptionsDrawer","container","iconAddress","launchPaginstion","page","perPage","results","totalPages","pagination","Pagination","eventData","p","submitForm","select","filterBoxList","event","searchValue","savedOptions","selectedItem","foodService","categories","defaultOption","category","displayText","option","showAllOption","createShowAllOption","modal","modalContent","listItems","productData","onCardClick","e","card","showSpinner","cartList","makeModalMarkup","addToCartBtn","onCartBtnClick","cartElem","hideSpinner","openModal","removeFromCart","addToCart","BtnNameSwitcher","btn","updateCartCountTitle","product","updateCategory","iconUrl","onEscCloseModal","closeModal","onClickCloseModal","popularContentDrawer","discountContentDrawer","scrolltoTopBtn"],"mappings":"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"}