{"version":3,"file":"commonHelpers2.js","sources":["../src/js/screenSizeChecker.js","../src/js/filters.js","../src/js/pagination.js","../src/js/footer-send.js","../src/js/modal.js","../src/js/scrollUp.js"],"sourcesContent":["// import './mainSection.js';\nimport { contentByOptionsDrawer } from './mainSection.js';\n\nimport { storage } from './mainSection.js';\n\nwindow.addEventListener('resize', onScreenSizeFetch2);\n\nfunction onScreenSizeFetch2() {\n  const options = storage.getOptions();\n\n  const screenSize = window.innerWidth;\n  console.log(options.limit);\n  console.log(screenSize);\n  if (screenSize >= 768 && screenSize < 1440 && options.limit !== 8) {\n    options.limit = 8;\n    storage.setOptions(options);\n    contentByOptionsDrawer(options);\n  } else if (screenSize >= 1440 && options.limit !== 9) {\n    options.limit = 9;\n    storage.setOptions(options);\n    contentByOptionsDrawer(options);\n  } else if (screenSize < 768 && options.limit !== 6) {\n    options.limit = 6;\n    storage.setOptions(options);\n    contentByOptionsDrawer(options);\n  }\n}\n\n// function onScreenSizeFetch() {\n//   const screenSize = window.innerWidth;\n//   if (screenSize >= 768 && screenSize < 1440 && foodService.perPage !== 8) {\n//     foodService.perPage = 8;\n//     contentByOptionsDrawer();\n//   } else if (screenSize >= 1440 && foodService.perPage !== 9) {\n//     foodService.perPage = 9;\n//     contentByOptionsDrawer();\n//   } else if (screenSize < 768 && foodService.perPage !== 6) {\n//     foodService.perPage = 6;\n//     contentByOptionsDrawer();\n//   }\n// }\n","import {\n  foodService,\n  mainContentDrawer,\n  contentByOptionsDrawer,\n  storage,\n} from './mainSection.js';\n\nconst submitForm = document.querySelector('.submit-form');\nconst select = document.querySelector('.categories');\nconst filterBoxList = document.querySelector('.filter-box__list');\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  // Скинути значення інпуту\n  // submitForm.elements.search.value = '';\n  // Скинути значення select\n  select.value = '';\n});\n\nsubmitForm.addEventListener('submit', event => {\n  //select.value = '';\n  event.preventDefault();\n  //const selectedItem = select.value; //===============================================================\n  const searchValue = event.target.elements.search.value;\n  //foodService.searchQuerry = searchValue;\n  const savedOptions = storage.getFromStorage('options');\n  savedOptions.keyword = searchValue ? searchValue : null;\n\n  localStorage.setItem('options', JSON.stringify(savedOptions));\n  // storage.updateFoodService(savedOptions);\n\n  if (searchValue) {\n    contentByOptionsDrawer();\n  } else {\n    foodService.resetSearchQuerry();\n    mainContentDrawer();\n  }\n});\n\nselect.addEventListener('change', function () {\n  //submitForm.elements.search.value = '';\n  const selectedItem = select.value;\n  //const searchValue = event.target.elements.search.value; //================================================================================\n  const savedOptions = storage.getFromStorage('options');\n\n  savedOptions.category = selectedItem ? selectedItem : null;\n  localStorage.setItem('options', JSON.stringify(savedOptions));\n  if (select.value === 'show-all') {\n    filterBoxList.innerHTML = '';\n    storage.defaultApiOptions();\n    mainContentDrawer();\n  } else {\n    foodService.category = selectedItem;\n    filterBoxList.innerHTML = '';\n    contentByOptionsDrawer();\n  }\n});\n\nfoodService.getCategories().then(categories => {\n  //console.log(categories); //=======================================================================================\n  // dafault option\n  const defaultOption = document.createElement('option');\n  defaultOption.value = '';\n  defaultOption.textContent = 'Categories';\n  defaultOption.disabled = true;\n  defaultOption.selected = true; // Обрана за замовчуванням\n\n  const options = categories.map(category => {\n    const option = document.createElement('option');\n    option.value = category;\n    option.textContent = category;\n    return option;\n  });\n  const showAllOption = createShowAllOption();\n  options.push(showAllOption);\n  select.appendChild(defaultOption);\n  select.append(...options);\n});\n\nfunction createShowAllOption() {\n  const showAllOption = document.createElement('option');\n  showAllOption.textContent = 'Show All';\n  showAllOption.value = 'show-all';\n  //resetCategory();\n  return showAllOption;\n}\n","const refs = {\n    pagesRibbonEL: document.querySelector('.pag-ribbon'),\n};\n\nfunction onPaginationRibbonItems(pageIndex, pages) {\n    const pageIndexObj = {\n        leftBtn: 'visually-hidden',\n        indexOne: 1,\n        indexTwo: '',\n        indexThree: '',\n        indexFour: '',\n        indexFive: pages,\n        rightBtn: 'visually-hidden',\n    };\n\n    if (pages === 5) {\n        pageIndexObj.indexTwo = 2;\n        pageIndexObj.indexThree = 3;\n        pageIndexObj.indexFour = 4;\n    }\n    //передаєм \"...\" на третю позицію, якщо більше 5-ти сторінок і активна сторінка або 1,2, або передостання, остання\n    if (pages > 5 && (pageIndex <= 2 || pageIndex >= pages - 1)) {\n        pageIndexObj.indexTwo = 2;\n        pageIndexObj.indexThree = '...';\n        pageIndexObj.indexFour = pages - 1;\n    }\n    //передаєм \"...\" на другу або четверту позицію, якщо більше 5-ти сторінок і активна сторінка більша за 3 або меньша за перед-передостанню\n    if (pages > 5 && pageIndex > 3 && pageIndex < pages - 2) {\n        pageIndexObj.indexTwo = '...';\n        pageIndexObj.indexThree = pageIndex;\n        pageIndexObj.indexFour = '...';\n    }\n    //передаєм \"...\" на другу позицію, якщо більше 5-ти сторінок і активна сторінка - перед-передостання\n    if (pages > 5 && pageIndex === pages - 2) {\n        pageIndexObj.indexTwo = '...';\n        pageIndexObj.indexThree = pages - 2;\n        pageIndexObj.indexFour = pages - 1;\n    }\n    //передаєм \"...\" на четверту позицію, якщо більше 5-ти сторінок і активна сторінка - третя\n    if (pages > 5 && pageIndex === 3) {\n        pageIndexObj.indexTwo = 2;\n        pageIndexObj.indexThree = 3;\n        pageIndexObj.indexFour = '...';\n    }\n    const pageIndexArr = [];\n    pageIndexArr.push(\n        pageIndexObj.indexOne,\n        pageIndexObj.indexTwo,\n        pageIndexObj.indexThree,\n        pageIndexObj.indexFour,\n        pageIndexObj.indexFive,\n        pageIndexObj.leftBtn,\n        pageIndexObj.rightBtn\n    );\n    return pageIndexArr;\n}\n\nfunction onPaginationMarkup(pageIndex, pages) {\n    const ribbonArr = onPaginationRibbonItems(pageIndex, pages);\n    const leftBtn = `<button id=\"left-button\" type=\"button\" class=\"pag-btn pag-item\">\n    <svg class=\"arrow-icon\" width=\"24\" height=\"24\">\n      <use href=\"./img/icons.svg#icon-caret-small-left\"></use>\n    </svg>\n  </button>\n  <ul class=\"pag-wrapper\">`;\n    const rightBtn = `</ul>\n  <button id=\"right-button\" type=\"button\" class=\"pag-btn pag-item\">\n    <svg class=\"arrow-icon\" width=\"24\" height=\"24\">\n      <use href=\"./img/icons.svg#icon-caret-small-right\"></use>\n    </svg>\n  </button>`;\n    let pageItems;\n    if (pages <= 5) {\n        pageItems = pages;\n    } else {\n        pageItems = 5;\n    }\n    let markupArr = [];\n    for (let i = 0; i < pageItems; i++) {\n        markupArr.push(\n            `<li class=\"list\"><button id=\"${ribbonArr[i]}\" type=\"button\" class=\"pag-item\">${ribbonArr[i]}</button></li>`\n        );\n    }\n    markupArr.unshift(leftBtn);\n    markupArr.push(rightBtn);\n    return markupArr.join('');\n}\n\nexport function onPaginationRender(pageIndex, pages) {\n    const markup = onPaginationMarkup(pageIndex, pages);\n    refs.pagesRibbonEL.insertAdjacentHTML('afterbegin', markup);\n\n    if (pageIndex === 1) {\n        document.getElementById('left-button').classList.add('disabled');\n    }\n    if (pageIndex === pages) {\n        document.getElementById('right-button').classList.add('disabled');\n    }\n    const dotItemsEl = document.querySelectorAll('.pag-item');\n    dotItemsEl.forEach(item => {\n        if (item.textContent === '...') {\n            item.classList.add('pag-inactive');\n        }\n        if (Number(item.textContent) === pageIndex) {\n            item.classList.add('pag-active');\n        }\n    });\n}\n\nrefs.pagesRibbonEL.addEventListener('click', onLoadContent);\n\nfunction onLoadContent(e) {\n    const buttonId = e.target.closest('button').id;\n    console.log(buttonId);\n}\n","import { foodService } from './mainSection.js';\nconst subscriptionForm = document.getElementById('subscriptionForm');\nsubscriptionForm.addEventListener('submit', sendFormData);\n\nfunction sendFormData(event) {\n  event.preventDefault();\n\n  const emailInput = document.getElementById('emailInput');\n\n  if (emailInput.checkValidity()) {\n    const email = emailInput.value;\n    console.log(email);\n\n    foodService.subscribe(email);\n    //     .then(response => {\n    //       console.log('Subscription successful:', response);\n    //     })\n    //     .catch(error => {\n    //       console.error('Error subscribing:', error);\n    //     });\n    // } else {\n    //   console.log('Invalid email format');\n    // }\n  }\n}\n","import { foodService } from './mainSection';\nimport { storage } from './mainSection';\nimport iconUrl from '../img/icons.svg';\nimport { updateCartCountTitle } from './header';\n\nconst modal = document.querySelector('.modal');\nconst modalContent = document.querySelector('.modal-content');\nconst listItems = document.querySelector('.main-products');\n\nlet productData;\n\nlistItems.addEventListener('click', onCardClick);\n\nasync function onCardClick(e) {\n  if (\n    e.target.classList.contains('main-cart-icon') ||\n    e.target.classList.contains('cart-img-products') ||\n    e.target.classList.contains('popular-cart-img')\n  ) {\n    return;\n  }\n\n  const card = e.target.closest('li');\n  if (!card) return;\n\n  productData = await foodService.findProductById(card.dataset.id);\n  const cartList = storage.getCart();\n\n  modalContent.innerHTML = makeModalMarkup(productData);\n\n  const addToCartBtn = document.querySelector('.add-to-cart-btn');\n  addToCartBtn.removeEventListener('click', onCartBtnClick);\n  addToCartBtn.addEventListener('click', onCartBtnClick);\n  const isInCartList = cartList.some(\n    cartElem => cartElem._id === productData._id\n  );\n  console.log(isInCartList);\n  if (isInCartList) {\n    addToCartBtn.firstChild.textContent = 'Remove from';\n  }\n\n  openModal();\n}\n\nfunction onCartBtnClick() {\n  const cartList = storage.getCart();\n  console.log(cartList);\n  const isInCartList = cartList.some(\n    cartElem => cartElem._id === productData._id\n  );\n\n  if (isInCartList) {\n    removeFromCart();\n  } else {\n    addToCart();\n  }\n}\n\nfunction BtnNameSwitcher() {\n  const btn = document.querySelector('.add-to-cart-btn');\n  if (btn.firstChild.textContent === 'Add to') {\n    btn.firstChild.textContent = 'Remove from';\n  } else {\n    btn.firstChild.textContent = 'Add to';\n  }\n}\n\nfunction addToCart() {\n  storage.addProductToCart(productData);\n  updateCartCountTitle();\n  BtnNameSwitcher();\n}\n\nfunction removeFromCart() {\n  storage.removeFromCart(productData._id);\n  updateCartCountTitle();\n  BtnNameSwitcher();\n}\n\nfunction makeModalMarkup(product) {\n  return `\n  <button class=\"modal-btn-close\">\n  <svg class=\"close-sharp\" width=\"16\" height=\"16\">\n    <use href=\"${iconUrl}#icon-ion_close-sharp\"></use>\n  </svg>\n</button>\n<div class=\"modal-img-container\">\n  <img src=\"${product.img}\" alt=\"${product.name}\" class=\"modal-image\" />\n</div>\n<div class=\"modal-info\">\n  <h2 class=\"modal-title\">${product.name}</h2>\n  <div class=\"modal-info-wrapper\">\n    <p class=\"modal-product\">Category: <span>${product.category}</span></p>\n    <p class=\"modal-product\">Size: <span>${product.size}</span></p>\n    <p class=\"modal-product\">Popularity: <span>${product.popularity}</span></p>\n  </div>\n  <p class=\"modal-info-desc\">${product.desc}</p>\n</div>\n<p class=\"modal-price\">$${product.price}</p>\n<button class=\"add-to-cart-btn\">Add to<svg class=\"modal-cart\" width=\"18\" height=\"18\">\n    <use href=\"${iconUrl}#icon-heroicons-solid_shopping-cart\"></use>\n  </svg>\n</button>\n`;\n}\n\nfunction onEscCloseModal(e) {\n  if (e.key === 'Escape') {\n    closeModal();\n  }\n}\n\nfunction onClickCloseModal(e) {\n  if (e.target.classList.contains('modal')) {\n    // закриття по кліку по бекдропу\n    closeModal();\n  } else if (e.target.closest('.modal-btn-close')) {\n    // закриття по кліку по кнопці з класом '.modal-btn-close'\n    closeModal();\n  }\n}\n\nfunction openModal() {\n  modal.style.display = 'block';\n  document.body.classList.add('no-scroll');\n  document.addEventListener('keydown', onEscCloseModal);\n  window.addEventListener('click', onClickCloseModal);\n}\n\nfunction closeModal() {\n  modal.style.display = 'none';\n  document.removeEventListener('keydown', onEscCloseModal);\n  window.removeEventListener('click', onClickCloseModal);\n  document.body.classList.remove('no-scroll');\n}\n","\n\nconst scrolltoTopBtn = document.querySelector ('.isShownBtn')\nwindow.onscroll = () => {\n    if (window.scrollY > 700) {\n        scrolltoTopBtn.classList.remove('isHidden')\n    } else if (window.scrollY < 700) {\n        scrolltoTopBtn.classList.add('isHidden')\n    }\n};\n\nscrolltoTopBtn.onclick = () => {\n    window.scrollTo(0, 0);\n\n};"],"names":["onScreenSizeFetch2","options","storage","screenSize","contentByOptionsDrawer","submitForm","select","filterBoxList","event","searchValue","savedOptions","foodService","mainContentDrawer","selectedItem","categories","defaultOption","category","option","showAllOption","createShowAllOption","refs","onLoadContent","e","buttonId","subscriptionForm","sendFormData","emailInput","email","modal","modalContent","listItems","productData","onCardClick","card","cartList","makeModalMarkup","addToCartBtn","onCartBtnClick","isInCartList","cartElem","openModal","removeFromCart","addToCart","BtnNameSwitcher","btn","updateCartCountTitle","product","iconUrl","onEscCloseModal","closeModal","onClickCloseModal","scrolltoTopBtn"],"mappings":"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"}